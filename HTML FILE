<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Pro | Advanced Mortgage Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --success-color: #27ae60;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
            position: relative;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        nav ul li a i {
            margin-right: 8px;
        }
        
        nav ul li a:hover, nav ul li a.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        nav ul li a.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--secondary-color);
        }
        
        .main-content {
            padding: 2rem 0;
            min-height: calc(100vh - 200px);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .calculator-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0;
        }
        
        .calculator-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
            border-bottom: 2px solid var(--light-color);
            padding-bottom: 0.8rem;
            display: flex;
            align-items: center;
        }
        
        .calculator-title i {
            margin-right: 12px;
            color: var(--secondary-color);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -0.75rem;
        }
        
        .form-col {
            flex: 1;
            padding: 0 0.75rem;
            min-width: 250px;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 0.95rem;
        }
        
        input, select {
            width: 100%;
            padding: 0.85rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .input-group {
            position: relative;
        }
        
        .input-group span {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }
        
        .input-group input {
            padding-left: 30px;
        }
        
        .range-container {
            display: flex;
            align-items: center;
        }
        
        .range-value {
            margin-left: 1rem;
            font-weight: 600;
            color: var(--secondary-color);
            min-width: 60px;
            text-align: right;
        }
        
        .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.85rem 1.75rem;
            font-size: 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn-secondary {
            background-color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background-color: #6c7a7d;
        }
        
        .btn-accent {
            background-color: var(--accent-color);
        }
        
        .btn-accent:hover {
            background-color: #c0392b;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
        }
        
        .results-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid #e0e0e0;
        }
        
        .results-title {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .results-title i {
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .result-card {
            background: var(--light-color);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s ease;
            border-left: 4px solid var(--secondary-color);
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .result-label {
            font-size: 0.95rem;
            color: #7f8c8d;
            margin-bottom: 0.5rem;
        }
        
        .result-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .result-note {
            font-size: 0.85rem;
            color: #95a5a6;
            margin-top: 0.5rem;
        }
        
        .amortization-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .amortization-table th, .amortization-table td {
            padding: 0.85rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .amortization-table th {
            background-color: var(--light-color);
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .amortization-table tr:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        .chart-container {
            height: 350px;
            margin-top: 2rem;
            margin-bottom: 2rem;
        }
        
        .tabs-container {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #7f8c8d;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .tab-btn.active {
            color: var(--secondary-color);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--secondary-color);
        }
        
        .tab-content-section {
            display: none;
        }
        
        .tab-content-section.active {
            display: block;
        }
        
        .about-content {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            border: 1px solid #e0e0e0;
        }
        
        .about-title {
            font-size: 1.6rem;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .about-title i {
            margin-right: 12px;
            color: var(--secondary-color);
        }
        
        .about-text {
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .feature-card {
            background: var(--light-color);
            padding: 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            border-left: 4px solid var(--secondary-color);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .feature-title i {
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        .feature-desc {
            color: #7f8c8d;
            font-size: 0.95rem;
        }
        
        .developer-info {
            background: var(--light-color);
            padding: 2rem;
            border-radius: 8px;
            margin-top: 2rem;
            border-left: 4px solid var(--accent-color);
        }
        
        .info-title {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
            display: flex;
            align-items: center;
        }
        
        .info-title i {
            margin-right: 10px;
            color: var(--accent-color);
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .info-item {
            margin-bottom: 1rem;
        }
        
        .info-label {
            font-weight: 600;
            color: var(--dark-color);
            display: block;
            margin-bottom: 0.25rem;
        }
        
        .info-value {
            color: #7f8c8d;
        }
        
        .contact-form {
            margin-top: 2rem;
        }
        
        .form-row-contact {
            margin-bottom: 1.5rem;
        }
        
        textarea {
            width: 100%;
            padding: 0.85rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-height: 150px;
            resize: vertical;
        }
        
        textarea:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .newsletter-container {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-top: 2rem;
        }
        
        .newsletter-title {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        
        .newsletter-title i {
            margin-right: 10px;
            color: var(--secondary-color);
        }
        
        .newsletter-form {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .newsletter-form input {
            flex: 1;
            padding: 0.85rem;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .newsletter-form button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .newsletter-form button:hover {
            background-color: #c0392b;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2.5rem 0 1.5rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--secondary-color);
        }
        
        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bdc3c7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            nav ul li {
                margin: 0.5rem;
            }
            
            .form-col {
                flex: 100%;
                margin-bottom: 1rem;
            }
            
            .newsletter-form {
                flex-direction: column;
            }
        }
        
        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            color: var(--secondary-color);
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-color);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Print styles */
        @media print {
            header, footer, nav {
                display: none;
            }
            
            .calculator-container, .results-container {
                box-shadow: none;
                border: none;
                padding: 0;
            }
            
            .btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-home"></i>
                <span>Mortgage Pro</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#mortgage" class="active" data-tab="mortgage"><i class="fas fa-calculator"></i> Mortgage</a></li>
                    <li><a href="#loan" data-tab="loan"><i class="fas fa-hand-holding-usd"></i> Loan</a></li>
                    <li><a href="#affordability" data-tab="affordability"><i class="fas fa-piggy-bank"></i> Affordability</a></li>
                    <li><a href="#about" data-tab="about"><i class="fas fa-info-circle"></i> About</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main class="main-content">
        <div class="container">
            <!-- Mortgage Calculator Tab -->
            <div id="mortgage" class="tab-content active">
                <div class="calculator-container">
                    <h2 class="calculator-title">
                        <i class="fas fa-calculator"></i>
                        Mortgage Calculator
                    </h2>
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="mortgage-amount">Loan Amount ($)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">The total amount you wish to borrow</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="mortgage-amount" placeholder="300,000" value="300000">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="mortgage-rate">Interest Rate (%)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Annual interest rate for your mortgage</span>
                                    </span>
                                </label>
                                <div class="range-container">
                                    <input type="range" id="mortgage-rate" min="1" max="10" step="0.1" value="3.5">
                                    <span class="range-value" id="mortgage-rate-value">3.5%</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="mortgage-term">Loan Term (years)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Duration of your mortgage</span>
                                    </span>
                                </label>
                                <select id="mortgage-term">
                                    <option value="10">10 years</option>
                                    <option value="15">15 years</option>
                                    <option value="20">20 years</option>
                                    <option value="25">25 years</option>
                                    <option value="30" selected>30 years</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="mortgage-down">Down Payment ($)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Initial payment when purchasing the home</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="mortgage-down" placeholder="60,000" value="60000">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="property-tax">Property Tax ($/year)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Estimated annual property tax</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="property-tax" placeholder="3,000" value="3000">
                                </div>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="home-insurance">Home Insurance ($/year)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Estimated annual home insurance</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="home-insurance" placeholder="1,200" value="1200">
                                </div>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="pmi">PMI (%)
                                    <span class="tooltip">
                                        <i class="fas fa-question-circle"></i>
                                        <span class="tooltiptext">Private Mortgage Insurance if down payment < 20%</span>
                                    </span>
                                </label>
                                <div class="input-group">
                                    <span>%</span>
                                    <input type="number" id="pmi" placeholder="0.5" value="0.5" step="0.1" min="0" max="2">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button id="calculate-mortgage" class="btn">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                        <button id="reset-mortgage" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                        <button id="print-mortgage" class="btn btn-accent">
                            <i class="fas fa-print"></i> Print
                        </button>
                    </div>
                </div>
                
                <div id="mortgage-results" class="results-container" style="display: none;">
                    <h3 class="results-title">
                        <i class="fas fa-chart-pie"></i>
                        Mortgage Results
                    </h3>
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-label">Monthly Payment</div>
                            <div class="result-value" id="monthly-payment">$0</div>
                            <div class="result-note">Principal & Interest</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Total Monthly Payment</div>
                            <div class="result-value" id="total-monthly-payment">$0</div>
                            <div class="result-note">Including taxes & insurance</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Total Interest</div>
                            <div class="result-value" id="total-interest">$0</div>
                            <div class="result-note">Over loan term</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Total Cost</div>
                            <div class="result-value" id="total-cost">$0</div>
                            <div class="result-note">Principal + Interest</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Loan-to-Value</div>
                            <div class="result-value" id="loan-to-value">0%</div>
                            <div class="result-note">LTV ratio</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Payoff Date</div>
                            <div class="result-value" id="payoff-date">-</div>
                            <div class="result-note">Estimated completion</div>
                        </div>
                    </div>
                    
                    <div class="tabs-container">
                        <button class="tab-btn active" data-tab="mortgage-chart">Payment Breakdown</button>
                        <button class="tab-btn" data-tab="mortgage-schedule">Amortization Schedule</button>
                        <button class="tab-btn" data-tab="mortgage-summary">Loan Summary</button>
                    </div>
                    
                    <div class="tab-content-section active" id="mortgage-chart-tab">
                        <div class="chart-container">
                            <canvas id="mortgage-chart"></canvas>
                        </div>
                    </div>
                    
                    <div class="tab-content-section" id="mortgage-schedule-tab">
                        <h4 style="margin-bottom: 1rem;">Amortization Schedule (First 5 years)</h4>
                        <div style="overflow-x: auto;">
                            <table class="amortization-table">
                                <thead>
                                    <tr>
                                        <th>Year</th>
                                        <th>Payment</th>
                                        <th>Principal</th>
                                        <th>Interest</th>
                                        <th>Taxes</th>
                                        <th>Insurance</th>
                                        <th>PMI</th>
                                        <th>Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="amortization-table">
                                    <!-- Amortization data will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="tab-content-section" id="mortgage-summary-tab">
                        <div class="results-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
                            <div class="result-card">
                                <div class="result-label">Loan Amount</div>
                                <div class="result-value" id="summary-loan-amount">$0</div>
                            </div>
                            <div class="result-card">
                                <div class="result-label">Down Payment</div>
                                <div class="result-value" id="summary-down-payment">$0</div>
                            </div>
                            <div class="result-card">
                                <div class="result-label">Interest Rate</div>
                                <div class="result-value" id="summary-interest-rate">0%</div>
                            </div>
                            <div class="result-card">
                                <div class="result-label">Loan Term</div>
                                <div class="result-value" id="summary-loan-term">0 years</div>
                            </div>
                            <div class="result-card">
                                <div class="result-label">Total Interest Paid</div>
                                <div class="result-value" id="summary-total-interest">$0</div>
                            </div>
                            <div class="result-card">
                                <div class="result-label">Total Cost of Loan</div>
                                <div class="result-value" id="summary-total-cost">$0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Loan Calculator Tab -->
            <div id="loan" class="tab-content">
                <div class="calculator-container">
                    <h2 class="calculator-title">
                        <i class="fas fa-hand-holding-usd"></i>
                        Loan Calculator
                    </h2>
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="loan-amount">Loan Amount ($)</label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="loan-amount" placeholder="10,000" value="10000">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loan-rate">Interest Rate (%)</label>
                                <div class="range-container">
                                    <input type="range" id="loan-rate" min="1" max="30" step="0.5" value="7.5">
                                    <span class="range-value" id="loan-rate-value">7.5%</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="loan-term">Loan Term</label>
                                <div class="form-row">
                                    <div class="form-col">
                                        <input type="number" id="loan-term" value="5" min="1" max="30">
                                    </div>
                                    <div class="form-col">
                                        <select id="loan-term-unit">
                                            <option value="years">Years</option>
                                            <option value="months">Months</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loan-type">Payment Frequency</label>
                                <select id="loan-frequency">
                                    <option value="12">Monthly</option>
                                    <option value="26">Bi-Weekly</option>
                                    <option value="52">Weekly</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button id="calculate-loan" class="btn">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                        <button id="reset-loan" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
                
                <div id="loan-results" class="results-container" style="display: none;">
                    <h3 class="results-title">
                        <i class="fas fa-chart-bar"></i>
                        Loan Results
                    </h3>
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-label">Payment Amount</div>
                            <div class="result-value" id="loan-payment">$0</div>
                            <div class="result-note">Per payment period</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Total Interest</div>
                            <div class="result-value" id="loan-total-interest">$0</div>
                            <div class="result-note">Over loan term</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Total Cost</div>
                            <div class="result-value" id="loan-total-cost">$0</div>
                            <div class="result-note">Principal + Interest</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Interest Savings</div>
                            <div class="result-value" id="interest-savings">$0</div>
                            <div class="result-note">vs monthly payments</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="loan-chart"></canvas>
                    </div>
                    
                    <h4 style="margin-top: 2rem;">Payment Schedule (First 12 payments)</h4>
                    <div style="overflow-x: auto;">
                        <table class="amortization-table">
                            <thead>
                                <tr>
                                    <th>Payment #</th>
                                    <th>Payment Amount</th>
                                    <th>Principal</th>
                                    <th>Interest</th>
                                    <th>Balance</th>
                                </tr>
                            </thead>
                            <tbody id="loan-amortization-table">
                                <!-- Loan amortization data will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Affordability Calculator Tab -->
            <div id="affordability" class="tab-content">
                <div class="calculator-container">
                    <h2 class="calculator-title">
                        <i class="fas fa-piggy-bank"></i>
                        Home Affordability Calculator
                    </h2>
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="annual-income">Annual Income ($)</label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="annual-income" placeholder="75,000" value="75000">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="monthly-debts">Monthly Debts ($)</label>
                                <div class="input-group">
                                    <span>$</span>
                                    <input type="number" id="monthly-debts" placeholder="500" value="500">
                                </div>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="down-payment-percent">Down Payment (%)</label>
                                <div class="range-container">
                                    <input type="range" id="down-payment-percent" min="1" max="50" step="1" value="20">
                                    <span class="range-value" id="down-payment-percent-value">20%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="loan-term-afford">Loan Term (years)</label>
                                <select id="loan-term-afford">
                                    <option value="15">15 years</option>
                                    <option value="20">20 years</option>
                                    <option value="30" selected>30 years</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label for="interest-rate-afford">Interest Rate (%)</label>
                                <div class="range-container">
                                    <input type="range" id="interest-rate-afford" min="1" max="10" step="0.1" value="4.5">
                                    <span class="range-value" id="interest-rate-afford-value">4.5%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="property-tax-afford">Property Tax Rate (%)</label>
                                <div class="input-group">
                                    <span>%</span>
                                    <input type="number" id="property-tax-afford" placeholder="1.2" value="1.2" step="0.1">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group">
                        <button id="calculate-affordability" class="btn">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                        <button id="reset-affordability" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Reset
                        </button>
                    </div>
                </div>
                
                <div id="affordability-results" class="results-container" style="display: none;">
                    <h3 class="results-title">
                        <i class="fas fa-home"></i>
                        Affordability Results
                    </h3>
                    <div class="results-grid">
                        <div class="result-card">
                            <div class="result-label">Maximum Home Price</div>
                            <div class="result-value" id="max-home-price">$0</div>
                            <div class="result-note">Based on your income</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Down Payment</div>
                            <div class="result-value" id="afford-down-payment">$0</div>
                            <div class="result-note"><span id="down-payment-percent-result">20</span>% of home price</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Loan Amount</div>
                            <div class="result-value" id="afford-loan-amount">$0</div>
                            <div class="result-note">Principal to borrow</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Monthly Payment</div>
                            <div class="result-value" id="afford-monthly-payment">$0</div>
                            <div class="result-note">P&I + Taxes + Insurance</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Debt-to-Income Ratio</div>
                            <div class="result-value" id="dti-ratio">0%</div>
                            <div class="result-note">Recommended < 36%</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Housing Expense Ratio</div>
                            <div class="result-value" id="her-ratio">0%</div>
                            <div class="result-note">Recommended < 28%</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="affordability-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- About Us Tab -->
            <div id="about" class="tab-content">
                <div class="about-content">
                    <h2 class="about-title">
                        <i class="fas fa-info-circle"></i>
                        About Mortgage Pro
                    </h2>
                    <div class="about-text">
                        <p>Mortgage Pro is a comprehensive financial tool designed to help homebuyers, homeowners, and financial enthusiasts make informed decisions about mortgages, loans, and home affordability. Our advanced calculators provide detailed insights into your financial commitments, helping you plan for the future with confidence.</p>
                        <p>Whether you're a first-time homebuyer, looking to refinance, or simply exploring your options, Mortgage Pro offers the tools you need to understand your mortgage and loan scenarios.</p>
                    </div>
                    
                    <h3 class="about-title" style="font-size: 1.4rem; margin-top: 2rem;">
                        <i class="fas fa-star"></i>
                        Key Features
                    </h3>
                    
                    <div class="features-grid">
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-calculator"></i>
                                Mortgage Calculator
                            </h4>
                            <p class="feature-desc">Calculate monthly payments, total interest, and amortization schedules for your mortgage with detailed breakdowns and visualizations.</p>
                        </div>
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-hand-holding-usd"></i>
                                Loan Calculator
                            </h4>
                            <p class="feature-desc">Analyze personal loans with different terms and payment frequencies to find the best option for your needs.</p>
                        </div>
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-piggy-bank"></i>
                                Affordability Calculator
                            </h4>
                            <p class="feature-desc">Determine how much house you can afford based on your income, debts, and down payment.</p>
                        </div>
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-chart-pie"></i>
                                Visual Reports
                            </h4>
                            <p class="feature-desc">Interactive charts and graphs to help you visualize your payment breakdown and loan composition.</p>
                        </div>
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-table"></i>
                                Amortization Schedules
                            </h4>
                            <p class="feature-desc">Detailed payment schedules showing how each payment is applied to principal and interest over time.</p>
                        </div>
                        <div class="feature-card">
                            <h4 class="feature-title">
                                <i class="fas fa-mobile-alt"></i>
                                Responsive Design
                            </h4>
                            <p class="feature-desc">Access your mortgage calculations from any device - desktop, tablet, or mobile phone.</p>
                        </div>
                    </div>
                    
                    <div class="developer-info">
                        <h3 class="info-title">
                            <i class="fas fa-user-tie"></i>
                            Developer Information
                        </h3>
                        <div class="info-grid">
                            <div>
                                <div class="info-item">
                                    <span class="info-label">Name:</span>
                                    <span class="info-value">Asis Hang Rai</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Student ID:</span>
                                    <span class="info-value">35524152</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Project:</span>
                                    <span class="info-value">Mortgage Pro Calculator</span>
                                </div>
                            </div>
                            <div>
                                <div class="info-item">
                                    <span class="info-label">Date Created:</span>
                                    <span class="info-value" id="project-date"></span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Version:</span>
                                    <span class="info-value">2.0.0</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Technologies:</span>
                                    <span class="info-value">HTML5, CSS3, JavaScript, Chart.js</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="copyright">
                <p>&copy; <span id="current-year"></span> Mortgage Pro. All rights reserved. | Designed by Asis Hang Rai</p>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Tab switching functionality
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active tab in navigation
                document.querySelectorAll('nav a').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                this.classList.add('active');
                
                // Show the selected tab content
                const tabId = this.getAttribute('data-tab');
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Update range value displays
        document.getElementById('mortgage-rate').addEventListener('input', function() {
            document.getElementById('mortgage-rate-value').textContent = this.value + '%';
        });
        
        document.getElementById('loan-rate').addEventListener('input', function() {
            document.getElementById('loan-rate-value').textContent = this.value + '%';
        });
        
        document.getElementById('down-payment-percent').addEventListener('input', function() {
            document.getElementById('down-payment-percent-value').textContent = this.value + '%';
        });
        
        document.getElementById('interest-rate-afford').addEventListener('input', function() {
            document.getElementById('interest-rate-afford-value').textContent = this.value + '%';
        });
        
        // Tab buttons within results
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Update active tab button
                document.querySelectorAll('.tab-btn').forEach(tabBtn => {
                    tabBtn.classList.remove('active');
                });
                this.classList.add('active');
                
                // Show the selected tab content
                document.querySelectorAll('.tab-content-section').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabId + '-tab').classList.add('active');
            });
        });
        
        // Mortgage calculation
        document.getElementById('calculate-mortgage').addEventListener('click', function() {
            const loanAmount = parseFloat(document.getElementById('mortgage-amount').value);
            const downPayment = parseFloat(document.getElementById('mortgage-down').value);
            const interestRate = parseFloat(document.getElementById('mortgage-rate').value) / 100;
            const loanTerm = parseInt(document.getElementById('mortgage-term').value);
            const propertyTax = parseFloat(document.getElementById('property-tax').value) / 12;
            const homeInsurance = parseFloat(document.getElementById('home-insurance').value) / 12;
            const pmiRate = parseFloat(document.getElementById('pmi').value) / 100;
            
            const principal = loanAmount - downPayment;
            const monthlyRate = interestRate / 12;
            const numberOfPayments = loanTerm * 12;
            
            // Calculate monthly payment (P&I)
            const monthlyPayment = principal * 
                (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            
            // Calculate PMI if down payment < 20%
            let pmi = 0;
            if (downPayment / loanAmount < 0.2) {
                pmi = (principal * pmiRate) / 12;
            }
            
            // Calculate total monthly payment
            const totalMonthlyPayment = monthlyPayment + propertyTax + homeInsurance + pmi;
            
            // Calculate total cost and interest
            const totalCost = monthlyPayment * numberOfPayments;
            const totalInterest = totalCost - principal;
            
            // Calculate loan-to-value ratio
            const ltv = (principal / loanAmount) * 100;
            
            // Calculate payoff date
            const currentDate = new Date();
            const payoffDate = new Date(currentDate.setMonth(currentDate.getMonth() + numberOfPayments));
            const options = { year: 'numeric', month: 'long' };
            
            // Display results
            document.getElementById('monthly-payment').textContent = '$' + monthlyPayment.toFixed(2);
            document.getElementById('total-monthly-payment').textContent = '$' + totalMonthlyPayment.toFixed(2);
            document.getElementById('total-interest').textContent = '$' + totalInterest.toFixed(2);
            document.getElementById('total-cost').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('loan-to-value').textContent = ltv.toFixed(1) + '%';
            document.getElementById('payoff-date').textContent = payoffDate.toLocaleDateString('en-US', options);
            
            // Display summary
            document.getElementById('summary-loan-amount').textContent = '$' + loanAmount.toLocaleString();
            document.getElementById('summary-down-payment').textContent = '$' + downPayment.toLocaleString();
            document.getElementById('summary-interest-rate').textContent = (interestRate * 100).toFixed(2) + '%';
            document.getElementById('summary-loan-term').textContent = loanTerm + ' years';
            document.getElementById('summary-total-interest').textContent = '$' + totalInterest.toFixed(2);
            document.getElementById('summary-total-cost').textContent = '$' + totalCost.toFixed(2);
            
            // Generate amortization schedule
            generateAmortizationSchedule(principal, monthlyRate, numberOfPayments, monthlyPayment, propertyTax, homeInsurance, pmi);
            
            // Generate chart
            generateMortgageChart(principal, totalInterest, propertyTax * numberOfPayments, homeInsurance * numberOfPayments, pmi * (downPayment / loanAmount < 0.2 ? numberOfPayments : 0));
            
            // Show results
            document.getElementById('mortgage-results').style.display = 'block';
        });
        
        // Loan calculation
        document.getElementById('calculate-loan').addEventListener('click', function() {
            const loanAmount = parseFloat(document.getElementById('loan-amount').value);
            const interestRate = parseFloat(document.getElementById('loan-rate').value) / 100;
            let loanTerm = parseInt(document.getElementById('loan-term').value);
            const termUnit = document.getElementById('loan-term-unit').value;
            const frequency = parseInt(document.getElementById('loan-frequency').value);
            
            // Convert term to years if in months
            if (termUnit === 'months') {
                loanTerm = loanTerm / 12;
            }
            
            const periodicRate = interestRate / frequency;
            const numberOfPayments = loanTerm * frequency;
            
            // Calculate payment amount
            const paymentAmount = loanAmount * 
                (periodicRate * Math.pow(1 + periodicRate, numberOfPayments)) / 
                (Math.pow(1 + periodicRate, numberOfPayments) - 1);
            
            // Calculate total cost and interest
            const totalCost = paymentAmount * numberOfPayments;
            const totalInterest = totalCost - loanAmount;
            
            // Calculate monthly payment comparison
            const monthlyRate = interestRate / 12;
            const monthlyPayments = loanTerm * 12;
            const monthlyPayment = loanAmount * 
                (monthlyRate * Math.pow(1 + monthlyRate, monthlyPayments)) / 
                (Math.pow(1 + monthlyRate, monthlyPayments) - 1);
            const monthlyTotalInterest = (monthlyPayment * monthlyPayments) - loanAmount;
            const interestSavings = monthlyTotalInterest - totalInterest;
            
            // Display results
            document.getElementById('loan-payment').textContent = '$' + paymentAmount.toFixed(2);
            document.getElementById('loan-total-interest').textContent = '$' + totalInterest.toFixed(2);
            document.getElementById('loan-total-cost').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('interest-savings').textContent = '$' + interestSavings.toFixed(2);
            
            // Generate amortization schedule
            generateLoanAmortizationSchedule(loanAmount, periodicRate, numberOfPayments, paymentAmount);
            
            // Generate chart
            generateLoanChart(loanAmount, totalInterest);
            
            // Show results
            document.getElementById('loan-results').style.display = 'block';
        });
        
        // Affordability calculation
        document.getElementById('calculate-affordability').addEventListener('click', function() {
            const annualIncome = parseFloat(document.getElementById('annual-income').value);
            const monthlyDebts = parseFloat(document.getElementById('monthly-debts').value);
            const downPaymentPercent = parseFloat(document.getElementById('down-payment-percent').value) / 100;
            const loanTerm = parseInt(document.getElementById('loan-term-afford').value);
            const interestRate = parseFloat(document.getElementById('interest-rate-afford').value) / 100;
            const propertyTaxRate = parseFloat(document.getElementById('property-tax-afford').value) / 100;
            
            // Calculate maximum monthly payment (28% of monthly income for housing, 36% total DTI)
            const monthlyIncome = annualIncome / 12;
            const maxHousingPayment = monthlyIncome * 0.28;
            const maxTotalPayment = monthlyIncome * 0.36 - monthlyDebts;
            const maxPayment = Math.min(maxHousingPayment, maxTotalPayment);
            
            // Estimate home insurance (0.5% of home value annually)
            const insuranceRate = 0.005;
            
            // Calculate maximum home price
            let homePrice = 0;
            let tolerance = 1; // $1 tolerance
            let lowerBound = 0;
            let upperBound = monthlyIncome * 1000; // Very high upper bound
            
            // Use binary search to find the maximum home price
            while (upperBound - lowerBound > tolerance) {
                homePrice = (lowerBound + upperBound) / 2;
                
                const downPayment = homePrice * downPaymentPercent;
                const loanAmount = homePrice - downPayment;
                
                // Calculate P&I
                const monthlyPI = loanAmount * 
                    (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                    (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
                
                // Calculate taxes and insurance
                const monthlyTax = homePrice * propertyTaxRate / 12;
                const monthlyInsurance = homePrice * insuranceRate / 12;
                
                const totalPayment = monthlyPI + monthlyTax + monthlyInsurance;
                
                if (totalPayment <= maxPayment) {
                    lowerBound = homePrice;
                } else {
                    upperBound = homePrice;
                }
            }
            
            homePrice = Math.floor(homePrice);
            const downPayment = homePrice * downPaymentPercent;
            const loanAmount = homePrice - downPayment;
            
            // Calculate final monthly payment breakdown
            const monthlyPI = loanAmount * 
                (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            const monthlyTax = homePrice * propertyTaxRate / 12;
            const monthlyInsurance = homePrice * insuranceRate / 12;
            const totalPayment = monthlyPI + monthlyTax + monthlyInsurance;
            
            // Calculate DTI and HER ratios
            const dtiRatio = ((totalPayment + monthlyDebts) / monthlyIncome) * 100;
            const herRatio = (totalPayment / monthlyIncome) * 100;
            
            // Display results
            document.getElementById('max-home-price').textContent = '$' + homePrice.toLocaleString();
            document.getElementById('afford-down-payment').textContent = '$' + downPayment.toLocaleString();
            document.getElementById('down-payment-percent-result').textContent = (downPaymentPercent * 100);
            document.getElementById('afford-loan-amount').textContent = '$' + loanAmount.toLocaleString();
            document.getElementById('afford-monthly-payment').textContent = '$' + totalPayment.toFixed(2);
            document.getElementById('dti-ratio').textContent = dtiRatio.toFixed(1) + '%';
            document.getElementById('her-ratio').textContent = herRatio.toFixed(1) + '%';
            
            // Generate chart
            generateAffordabilityChart(monthlyPI, monthlyTax, monthlyInsurance);
            
            // Show results
            document.getElementById('affordability-results').style.display = 'block';
        });
        
        // Reset buttons
        document.getElementById('reset-mortgage').addEventListener('click', function() {
            document.getElementById('mortgage-amount').value = '300000';
            document.getElementById('mortgage-down').value = '60000';
            document.getElementById('mortgage-rate').value = '3.5';
            document.getElementById('mortgage-rate-value').textContent = '3.5%';
            document.getElementById('mortgage-term').value = '30';
            document.getElementById('property-tax').value = '3000';
            document.getElementById('home-insurance').value = '1200';
            document.getElementById('pmi').value = '0.5';
            document.getElementById('mortgage-results').style.display = 'none';
        });
        
        document.getElementById('reset-loan').addEventListener('click', function() {
            document.getElementById('loan-amount').value = '10000';
            document.getElementById('loan-rate').value = '7.5';
            document.getElementById('loan-rate-value').textContent = '7.5%';
            document.getElementById('loan-term').value = '5';
            document.getElementById('loan-term-unit').value = 'years';
            document.getElementById('loan-frequency').value = '12';
            document.getElementById('loan-results').style.display = 'none';
        });
        
        document.getElementById('reset-affordability').addEventListener('click', function() {
            document.getElementById('annual-income').value = '75000';
            document.getElementById('monthly-debts').value = '500';
            document.getElementById('down-payment-percent').value = '20';
            document.getElementById('down-payment-percent-value').textContent = '20%';
            document.getElementById('loan-term-afford').value = '30';
            document.getElementById('interest-rate-afford').value = '4.5';
            document.getElementById('interest-rate-afford-value').textContent = '4.5%';
            document.getElementById('property-tax-afford').value = '1.2';
            document.getElementById('affordability-results').style.display = 'none';
        });
        
        // Print button
        document.getElementById('print-mortgage').addEventListener('click', function() {
            window.print();
        });
        
        // Helper function to generate mortgage amortization schedule
        function generateAmortizationSchedule(principal, monthlyRate, numberOfPayments, monthlyPayment, propertyTax, homeInsurance, pmi) {
            let balance = principal;
            let tableHTML = '';
            
            for (let year = 1; year <= 5; year++) {
                let yearPrincipal = 0;
                let yearInterest = 0;
                
                for (let month = 1; month <= 12; month++) {
                    const interest = balance * monthlyRate;
                    const principalPaid = monthlyPayment - interest;
                    balance -= principalPaid;
                    
                    yearPrincipal += principalPaid;
                    yearInterest += interest;
                }
                
                tableHTML += `
                    <tr>
                        <td>${year}</td>
                        <td>$${(monthlyPayment * 12).toFixed(2)}</td>
                        <td>$${yearPrincipal.toFixed(2)}</td>
                        <td>$${yearInterest.toFixed(2)}</td>
                        <td>$${(propertyTax * 12).toFixed(2)}</td>
                        <td>$${(homeInsurance * 12).toFixed(2)}</td>
                        <td>$${(pmi * 12).toFixed(2)}</td>
                        <td>$${balance.toFixed(2)}</td>
                    </tr>
                `;
            }
            
            document.getElementById('amortization-table').innerHTML = tableHTML;
        }
        
        // Helper function to generate loan amortization schedule
        function generateLoanAmortizationSchedule(principal, periodicRate, numberOfPayments, paymentAmount) {
            let balance = principal;
            let tableHTML = '';
            
            for (let i = 1; i <= 12; i++) {
                const interest = balance * periodicRate;
                const principalPaid = paymentAmount - interest;
                balance -= principalPaid;
                
                tableHTML += `
                    <tr>
                        <td>${i}</td>
                        <td>$${paymentAmount.toFixed(2)}</td>
                        <td>$${principalPaid.toFixed(2)}</td>
                        <td>$${interest.toFixed(2)}</td>
                        <td>$${balance.toFixed(2)}</td>
                    </tr>
                `;
            }
            
            document.getElementById('loan-amortization-table').innerHTML = tableHTML;
        }
        
        // Helper function to generate mortgage chart
        function generateMortgageChart(principal, totalInterest, totalTax, totalInsurance, totalPMI) {
            const ctx = document.getElementById('mortgage-chart').getContext('2d');
            
            if (window.mortgageChart) {
                window.mortgageChart.destroy();
            }
            
            window.mortgageChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Principal', 'Interest', 'Taxes', 'Insurance', 'PMI'],
                    datasets: [{
                        data: [principal, totalInterest, totalTax, totalInsurance, totalPMI],
                        backgroundColor: [
                            '#3498db',
                            '#e74c3c',
                            '#2ecc71',
                            '#f39c12',
                            '#9b59b6'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: $${value.toFixed(2)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Helper function to generate loan chart
        function generateLoanChart(principal, totalInterest) {
            const ctx = document.getElementById('loan-chart').getContext('2d');
            
            if (window.loanChart) {
                window.loanChart.destroy();
            }
            
            window.loanChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Principal', 'Interest'],
                    datasets: [{
                        label: 'Loan Composition',
                        data: [principal, totalInterest],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(231, 76, 60, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(231, 76, 60, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.raw || 0;
                                    return `${label}: $${value.toFixed(2)}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Helper function to generate affordability chart
        function generateAffordabilityChart(principalInterest, tax, insurance) {
            const ctx = document.getElementById('affordability-chart').getContext('2d');
            
            if (window.affordabilityChart) {
                window.affordabilityChart.destroy();
            }
            
            window.affordabilityChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Principal & Interest', 'Property Tax', 'Home Insurance'],
                    datasets: [{
                        data: [principalInterest, tax, insurance],
                        backgroundColor: [
                            '#3498db',
                            '#2ecc71',
                            '#f39c12'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: $${value.toFixed(2)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Set current date in about section
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('project-date').textContent = new Date().toLocaleDateString('en-US', options);
        
        // Initialize with mortgage calculator
        document.getElementById('calculate-mortgage').click();
    </script>
</body>
</html>
